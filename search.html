<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="style.css" rel="stylesheet" type="text/css">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script src="./script.js" charset="utf-8"></script>
    <!-- NavBar + Footer -->
    <script src="./NavbarAndFooter.js"></script>
    <title>Hello, world!</title>
    <script src="https://kit.fontawesome.com/e83dbc42ef.js" crossorigin="anonymous"></script>
   <style>
   
    </style>

   
  </head>
  <body>
    <!-- navigation -->
    <script>document.write(navbar)</script>

    <!-- content -->
    <div class="container-fluid" style="padding-right: inherit; padding-left: inherit;">
        <form action="./search.html" class="d-flex" style="margin-left:auto; margin-right:auto; width:60%;">

            <label>search by genere</label>
            <select name="genere" id="genere" class="form-select" aria-label="Default select example" onchange="(document.getElementById('genere').value == 'null') ? (document.getElementById('searchGenere').disabled =  true) : (document.getElementById('searchGenere').disabled =  false)">
                <option value=null selected></option>
                <script>
                    get("https://api.themoviedb.org/3/genre/movie/list?api_key=2bb75004dddb3cae50be3c30cc0f551d", function(response){                
                        //console.log("get response: ", response);
                        for (obj of response.genres) {
                            //console.log(obj)
                            document.getElementById("genere").innerHTML +=  `
                            <option value="${obj.id}">${obj.name}</option>
                            `;
                        }
                    });

                </script>
            </select>
            <button disabled type='submit' class="search" id="searchGenere" ><i class="fas fa-search"></i></button>
        </form>
        <div class="row" id="resultsFilms">
            <h5>FILMS</h5>
        </div>
        <div class="row" id="resultsActors">
            <h5>ACTORS</h5>
        </div>

        <script>
            if (((query = get_from_url("QueryToSearch=")) != false) && ((TypeOfSearch = get_from_url("TypeOfSearch=")) != false) ) {
                //console.log("query", query);
                //console.log("TypeofSearch", TypeOfSearch);
                multiSearchResult(TypeOfSearch, query);
            }
            /* examples
            https://api.themoviedb.org/3/search/person?api_key=2bb75004dddb3cae50be3c30cc0f551d&query=ciao
            https://api.themoviedb.org/3/search/movie?api_key=2bb75004dddb3cae50be3c30cc0f551d&query=ciao
            https://api.themoviedb.org/3/search/company?api_key=2bb75004dddb3cae50be3c30cc0f551d&query=ciao
            https://api.themoviedb.org/3/search/collection?api_key=2bb75004dddb3cae50be3c30cc0f551d&query=ciao
            https://api.themoviedb.org/3/search/keyword?api_key=2bb75004dddb3cae50be3c30cc0f551d&query=ciao
            https://api.themoviedb.org/3/search/multi?api_key=2bb75004dddb3cae50be3c30cc0f551d&query=ciao
            */

            if ( (genere = get_from_url("genere=")) != false) {
                //console.log("idgenere", genere);
                genereSearchResult(genere);
            }
            
        </script>
    </div>
    <!-- /content -->



    <!-- footer -->
    <script>document.write(footer)</script>
    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
    -->
  </body>
</html>